<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LLM Prompt Studio Pro - Suite professionnelle complète pour la création, gestion et optimisation de prompts AI avec interface ultra-moderne inspirée de macOS et GitHub">
    <meta name="keywords" content="LLM, AI, Prompt Engineering, GPT, Claude, Gemini, Machine Learning, Studio Pro">
    <meta name="author" content="LLM Prompt Studio">
    <title>⚡ LLM Prompt Studio Pro | Ultimate Edition 2025</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='80' font-size='80'>⚡</text></svg>">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Pro -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Lucide Icons -->
    <script defer src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Prism.js for Syntax Highlighting - Lazy Loading -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" media="print" onload="this.media='all'">
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markdown.min.js"></script>
    
    <!-- Monaco Editor - Lazy Loading on Demand -->
    <script>
        window.loadMonacoEditor = function() {
            if (!window.monacoLoaded) {
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js';
                script.onload = () => {
                    window.monacoLoaded = true;
                    require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs' }});
                };
                document.head.appendChild(script);
            }
        };
    </script>
    
    <!-- Chart.js - Lazy Loading -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Marked.js for Markdown -->
    <script defer src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- DOMPurify for XSS Protection -->
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
    
    <!-- Sortable.js for Drag & Drop -->
    <script defer src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    
    <!-- Hotkeys.js -->
    <script defer src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>
    
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/css/section-editor.css">
</head>
<body>
    <!-- App Wrapper -->
    <div class="app-wrapper">
        <!-- macOS Style Window Frame -->
        <div class="window-frame">
            <div class="window-controls">
                <div class="window-control close"></div>
                <div class="window-control minimize"></div>
                <div class="window-control maximize"></div>
            </div>
            <div class="window-title">LLM Prompt Studio Pro — Ultimate Edition 2025</div>
        </div>
        
        <!-- Main Header -->
        <header class="main-header">
            <div class="logo-container">
                <div class="logo-icon">⚡</div>
                <div class="logo-text">
                    <div class="logo-title">LLM Prompt Studio Pro</div>
                    <div class="logo-subtitle">Ultimate Edition 2025</div>
                </div>
            </div>
            
            <!-- Navigation Tabs -->
            <nav class="nav-tabs">
                <button class="nav-tab active" data-tab="workspace">
                    <i class="fas fa-laptop-code nav-tab-icon"></i>
                    <span>Workspace</span>
                    <span class="nav-tab-badge">3</span>
                </button>
                <button class="nav-tab" data-tab="library">
                    <i class="fas fa-book nav-tab-icon"></i>
                    <span>Library</span>
                </button>
                <button class="nav-tab" data-tab="analytics">
                    <i class="fas fa-chart-line nav-tab-icon"></i>
                    <span>Analytics</span>
                </button>
                <button class="nav-tab" data-tab="models">
                    <i class="fas fa-robot nav-tab-icon"></i>
                    <span>Models</span>
                </button>
                <button class="nav-tab" data-tab="team">
                    <i class="fas fa-users nav-tab-icon"></i>
                    <span>Team</span>
                </button>
                <button class="nav-tab" data-tab="testing">
                    <i class="fas fa-vial nav-tab-icon"></i>
                    <span>Testing</span>
                </button>
            </nav>
            
            <!-- Header Actions -->
            <div class="header-actions">
                <!-- Search -->
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search prompts..." />
                    <i class="fas fa-search search-icon"></i>
                    <span class="search-shortcut">⌘K</span>
                </div>
                
                <!-- Action Buttons -->
                <div class="btn-group">
                    <button class="btn btn-ghost btn-icon tooltip">
                        <i class="fas fa-bell"></i>
                        <span class="tooltip-content">Notifications</span>
                    </button>
                    <button class="btn btn-ghost btn-icon tooltip">
                        <i class="fas fa-cog"></i>
                        <span class="tooltip-content">Settings</span>
                    </button>
                </div>
                
                <!-- Theme Toggle -->
                <div class="theme-toggle" id="themeToggle">
                    <div class="theme-toggle-slider">
                        <i class="fas fa-sun" style="font-size: 10px;"></i>
                    </div>
                </div>
                
                <!-- Status Indicator -->
                <div class="status-indicator">
                    <span class="status-dot"></span>
                    <span>Online</span>
                </div>
                
                <!-- New Prompt Button -->
                <button class="btn btn-primary" id="newPromptBtn">
                    <i class="fas fa-plus"></i>
                    <span>New Prompt</span>
                </button>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Library Panel (hidden by default) -->
            <div class="library-panel page-panel" id="libraryPanel" style="display: none; padding: var(--space-xl); overflow-y: auto;">
                <div class="panel">
                    <div class="panel-header">
                        <h3 class="panel-title"><i class="fas fa-book"></i> Prompt Library</h3>
                    </div>
                    <div id="libraryContent" class="panel-content">
                        <!-- Prompt cards will be rendered here by UIRenderer -->
                    </div>
                </div>
            </div>

            <!-- Settings Panel (hidden by default) -->
            <div class="settings-panel page-panel" id="settingsPanel" style="display: none; padding: var(--space-xl); overflow-y: auto;">
                <div class="panel">
                    <div class="panel-header">
                        <h3 class="panel-title"><i class="fas fa-cog"></i> Settings</h3>
                    </div>
                    <div class="panel-content">
                        <!-- API Keys Section -->
                        <h4>API Keys</h4>
                        <div class="form-group">
                            <label class="form-label">OpenAI API Key</label>
                            <input type="password" id="openai_api_key" class="form-input" placeholder="sk-...">
                        </div>
                         <div class="form-group">
                            <label class="form-label">Anthropic API Key</label>
                            <input type="password" id="anthropic_api_key" class="form-input" placeholder="anthropic-...">
                        </div>
                        <button class="btn btn-primary" id="saveApiKeysBtn">Save Keys</button>
                        <hr style="margin: var(--space-lg) 0;">
                        <!-- Data Management -->
                        <h4>Data Management</h4>
                        <button class="btn btn-secondary" id="backupDataBtn">Backup All Data</button>
                        <button class="btn btn-secondary" id="restoreDataBtn">Restore from Backup</button>
                    </div>
                </div>
            </div>

            <!-- Testing Panel (hidden by default) -->
            <div class="testing-panel page-panel" id="testingPanel" style="display: none; padding: var(--space-xl); overflow-y: auto;">
                <div class="panel">
                    <div class="panel-header">
                        <h3 class="panel-title"><i class="fas fa-vial"></i> Test Suites</h3>
                    </div>
                    <div style="display:grid; grid-template-columns: 1.2fr 1fr; gap:0.75rem;">
                        <div>
                          <div style="display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:0.5rem;">
                            <button class="btn btn-secondary" id="addSuiteBtn"><i class="fas fa-plus"></i> New Suite</button>
                            <button class="btn btn-secondary" id="importCsvSuiteBtn"><i class="fas fa-upload"></i> Import CSV</button>
                            <button class="btn btn-accent" id="runSuitesBtn"><i class="fas fa-play"></i> Run Active Suite</button>
                          </div>
                          <div id="suitesList" class="cards-grid" aria-live="polite">
                            <div class="card" id="emptySuitesState">No suites yet. Create one to start.</div>
                          </div>
                        </div>
                        <div>
                          <div class="settings-group">
                            <h3 class="settings-group-title"><i class="fas fa-clipboard-check"></i> Validation Rules</h3>
                            <div class="toggle-switch"><span class="toggle-label">Is Valid JSON</span><label class="toggle-input"><input type="checkbox" id="ruleJson" /><span class="toggle-slider"></span></label></div>
                            <div class="toggle-switch"><span class="toggle-label">Contains Keyword</span><label class="toggle-input"><input type="checkbox" id="ruleKeyword" /><span class="toggle-slider"></span></label></div>
                            <div class="form-group" id="ruleKeywordWrap" style="display:none; margin-top:0.5rem;"><input type="text" id="ruleKeywordInput" class="form-input" placeholder="Keyword" /></div>
                          </div>
                        </div>
                    </div>
                    <div class="results-panel" style="margin-top:0.75rem;">
                        <div class="result-header"><strong>Results</strong></div>
                        <div id="testsResults" class="result-box"></div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-chevron-left"></i>
                </div>
                
                <div class="sidebar-header">
                    <h3 class="sidebar-title">Explorer</h3>
                </div>
                
                <div class="sidebar-menu">
                    <!-- Projects Section -->
                    <div class="sidebar-section">
                        <div class="sidebar-section-title">Projects</div>
                        <a href="#" class="sidebar-item active">
                            <i class="fas fa-folder sidebar-item-icon"></i>
                            <span class="sidebar-item-text">GPT-4 Prompts</span>
                            <span class="sidebar-item-badge">12</span>
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-folder sidebar-item-icon"></i>
                            <span class="sidebar-item-text">Claude 3 Prompts</span>
                            <span class="sidebar-item-badge">8</span>
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-folder sidebar-item-icon"></i>
                            <span class="sidebar-item-text">Gemini Pro</span>
                            <span class="sidebar-item-badge">5</span>
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-folder-plus sidebar-item-icon"></i>
                            <span class="sidebar-item-text">New Project</span>
                        </a>
                    </div>
                    
                    <!-- Quick Access -->
                    <div class="sidebar-section">
                        <div class="sidebar-section-title">Quick Access</div>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-star sidebar-item-icon"></i>
                            <span class="sidebar-item-text">Favorites</span>
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-clock sidebar-item-icon"></i>
                            <span class="sidebar-item-text">Recent</span>
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-share-alt sidebar-item-icon"></i>
                            <span class="sidebar-item-text">Shared</span>
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-trash sidebar-item-icon"></i>
                            <span class="sidebar-item-text">Trash</span>
                        </a>
                    </div>
                    
                    <!-- Tools -->
                    <div class="sidebar-section">
                        <div class="sidebar-section-title">Tools</div>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-magic sidebar-item-icon"></i>
                            <span class="sidebar-item-text">AI Assistant</span>
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-code sidebar-item-icon"></i>
                            <span class="sidebar-item-text">Code Generator</span>
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-language sidebar-item-icon"></i>
                            <span class="sidebar-item-text">Translator</span>
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-sliders-h sidebar-item-icon"></i>
                            <span class="sidebar-item-text">Parameters</span>
                        </a>
                    </div>
                </div>
            </aside>
            
            <!-- Workspace -->
            <div class="workspace page-panel" id="workspacePanel">
                <!-- Workspace Header -->
                <div class="workspace-header">
                    <div class="workspace-title">
                        <i class="fas fa-folder-open workspace-title-icon"></i>
                        <span>GPT-4 Prompts</span>
                    </div>
                    <div class="workspace-actions">
                        <button class="btn btn-secondary">
                            <i class="fas fa-filter"></i>
                            <span>Filter</span>
                        </button>
                        <button class="btn btn-secondary">
                            <i class="fas fa-sort"></i>
                            <span>Sort</span>
                        </button>
                        <button class="btn btn-secondary">
                            <i class="fas fa-th"></i>
                            <span>View</span>
                        </button>
                        <button class="btn btn-secondary" id="abTestBtn">
                            <i class="fas fa-columns"></i>
                            <span>A/B Test</span>
                        </button>
                    </div>
                </div>
                
                <!-- Tab Bar -->
                <div class="tab-bar">
                    <button class="tab active">
                        <i class="fas fa-file-alt tab-icon"></i>
                        <span>prompt_001.md</span>
                        <i class="fas fa-times tab-close"></i>
                    </button>
                    <button class="tab">
                        <i class="fas fa-file-alt tab-icon"></i>
                        <span>system_prompt.md</span>
                        <i class="fas fa-times tab-close"></i>
                    </button>
                    <button class="tab">
                        <i class="fas fa-file-alt tab-icon"></i>
                        <span>template.md</span>
                        <i class="fas fa-times tab-close"></i>
                    </button>
                    <button class="tab-add">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                
                <!-- Editor Container -->
                <div class="editor-container" id="editorContainer">
                    <!-- Main Editor -->
                    <div class="editor-main">
                        <!-- Editor Toolbar -->
                        <div class="editor-toolbar">
                            <div class="toolbar-group">
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-undo"></i>
                                    <span class="tooltip-content">Undo</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-redo"></i>
                                    <span class="tooltip-content">Redo</span>
                                </button>
                            </div>
                            
                            <div class="toolbar-group">
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-bold"></i>
                                    <span class="tooltip-content">Bold</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-italic"></i>
                                    <span class="tooltip-content">Italic</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-underline"></i>
                                    <span class="tooltip-content">Underline</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-strikethrough"></i>
                                    <span class="tooltip-content">Strikethrough</span>
                                </button>
                            </div>
                            
                            <div class="toolbar-group">
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-code"></i>
                                    <span class="tooltip-content">Code</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-quote-right"></i>
                                    <span class="tooltip-content">Quote</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-link"></i>
                                    <span class="tooltip-content">Link</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-image"></i>
                                    <span class="tooltip-content">Image</span>
                                </button>
                            </div>
                            
                            <div class="toolbar-group">
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-list-ul"></i>
                                    <span class="tooltip-content">Bullet List</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-list-ol"></i>
                                    <span class="tooltip-content">Numbered List</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-tasks"></i>
                                    <span class="tooltip-content">Task List</span>
                                </button>
                            </div>
                             <div class="toolbar-group dropdown" id="strategyDropdown">
                                <button class="toolbar-btn" title="Add a reasoning strategy"><i class="fas fa-chess"></i> Strategies</button>
                                <div class="dropdown-menu" id="strategyMenu"></div>
                            </div>
                            
                            <div class="toolbar-group">
                                <button class="toolbar-btn active tooltip">
                                    <i class="fas fa-eye"></i>
                                    <span class="tooltip-content">Preview</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-columns"></i>
                                    <span class="tooltip-content">Split View</span>
                                </button>
                            </div>
                            
                            <div style="flex: 1;"></div>
                            
                            <div class="toolbar-group">
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-play"></i>
                                    <span class="tooltip-content">Run Prompt</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-save"></i>
                                    <span class="tooltip-content">Save</span>
                                </button>
                                <button class="toolbar-btn tooltip">
                                    <i class="fas fa-share"></i>
                                    <span class="tooltip-content">Share</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="editor-modes" style="padding: 0 var(--space-lg);">
                            <button class="toolbar-btn active" data-view="editor">Editor</button>
                            <button class="toolbar-btn" data-view="chat">Chat</button>
                        </div>

                        <!-- Sections controls -->
                        <div class="sections-bar" style="padding: 0 var(--space-lg); margin-bottom: var(--space-sm);">
                            <div style="flex:1; font-weight:600; color: var(--text-secondary);">Prompt Structure</div>
                            <div style="display:flex; gap:0.5rem; align-items:center;">
                              <button id="addSectionBtn" class="btn btn-secondary btn-icon" aria-label="Add Section"><i class="fas fa-plus"></i></button>
                              <div class="dropdown" id="sectionsDropdown">
                                <button class="btn btn-secondary btn-icon" aria-haspopup="true" aria-expanded="false" aria-label="Section Menu"><i class="fas fa-ellipsis-h"></i></button>
                                <div class="dropdown-menu">
                                  <div class="dropdown-item" id="resetDefaultSections"><i class="fas fa-undo"></i> Restore Defaults</div>
                                  <div class="dropdown-item" id="exportSections"><i class="fas fa-download"></i> Export Sections (JSON)</div>
                                  <div class="dropdown-item" id="importSections"><i class="fas fa-upload"></i> Import Sections (JSON)</div>
                                </div>
                              </div>
                            </div>
                        </div>

                        <!-- Hierarchical structure container -->
                        <div id="sectionsContainer" style="padding: 0 var(--space-lg); margin-bottom: var(--space-md);"></div>

                        <!-- Section content editor -->
                        <div id="sectionEditorContainer" class="tab-content" style="padding: 0 var(--space-lg); margin-bottom: var(--space-md);">
                            <div class="form-group">
                              <label class="form-label" id="sectionEditorLabel">Section Content</label>
                              <div id="section-textarea-container" style="border: 1px solid var(--border); border-radius: var(--radius-lg); min-height: 150px;">
                                 <!-- Monaco editor for section content will be mounted here -->
                              </div>
                            </div>
                        </div>

                        <div class="editor-view" id="editorView">
                            <!-- Sections controls -->
                            <div class="sections-bar" style="padding: 0 var(--space-lg); margin-bottom: var(--space-sm);">
                                <div style="flex:1; font-weight:600; color: var(--text-secondary);">Prompt Structure</div>
                                <div style="display:flex; gap:0.5rem; align-items:center;">
                                  <button id="addSectionBtn" class="btn btn-secondary btn-icon" aria-label="Add Section"><i class="fas fa-plus"></i></button>
                                  <div class="dropdown" id="sectionsDropdown">
                                    <button class="btn btn-secondary btn-icon" aria-haspopup="true" aria-expanded="false" aria-label="Section Menu"><i class="fas fa-ellipsis-h"></i></button>
                                    <div class="dropdown-menu">
                                      <div class="dropdown-item" id="resetDefaultSections"><i class="fas fa-undo"></i> Restore Defaults</div>
                                      <div class="dropdown-item" id="exportSections"><i class="fas fa-download"></i> Export Sections (JSON)</div>
                                      <div class="dropdown-item" id="importSections"><i class="fas fa-upload"></i> Import Sections (JSON)</div>
                                    </div>
                                  </div>
                                </div>
                            </div>

                            <!-- Hierarchical structure container -->
                            <div id="sectionsContainer" style="padding: 0 var(--space-lg); margin-bottom: var(--space-md);"></div>

                            <!-- Section content editor -->
                            <div id="sectionEditorContainer" class="tab-content" style="padding: 0 var(--space-lg); margin-bottom: var(--space-md);">
                                <div class="form-group">
                                  <label class="form-label" id="sectionEditorLabel">Section Content</label>
                                  <div id="section-textarea-container" style="border: 1px solid var(--border); border-radius: var(--radius-lg); min-height: 150px;">
                                     <!-- Monaco editor for section content will be mounted here -->
                                  </div>
                                </div>
                            </div>
                        </div>

                        <div class="chat-view" id="chatView" style="display: none; padding: var(--space-lg);">
                            <div class="chat-box" id="chatBox" style="height: 400px; overflow-y: auto; border: 1px solid var(--border); border-radius: var(--radius-lg); padding: var(--space-md); margin-bottom: var(--space-md);"></div>
                            <div class="chat-input-area" style="display: flex; gap: var(--space-sm);">
                                <input type="text" id="chatInput" class="form-control" placeholder="Send a message...">
                                <button id="sendChatBtn" class="btn btn-primary">Send</button>
                            </div>
                        </div>

                        <!-- Monaco Editor -->
                        <div class="monaco-wrapper">
                            <div id="monaco-editor"></div>
                        </div>
                        
                        <!-- Editor Footer -->
                        <div class="editor-footer">
                            <div class="footer-left">
                                <div class="footer-item">
                                    <i class="fas fa-file-alt footer-icon"></i>
                                    <span>Markdown</span>
                                </div>
                                <div class="footer-item">
                                    <i class="fas fa-code-branch footer-icon"></i>
                                    <span>main</span>
                                </div>
                                <div class="footer-item">
                                    <i class="fas fa-check-circle footer-icon" style="color: var(--success);"></i>
                                    <span>Saved</span>
                                </div>
                            </div>
                            <div class="footer-right">
                                <div class="footer-item">
                                    <span>Ln 42, Col 15</span>
                                </div>
                                <div class="footer-item">
                                    <span>UTF-8</span>
                                </div>
                                <div class="footer-item">
                                    <span>2.3 KB</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Preview Panel -->
                    <div class="preview-panel" id="previewPanel">
                        <div class="panel-header">
                            <h3 class="panel-title">Preview</h3>
                            <div class="toolbar-group">
                                <button class="toolbar-btn active" data-format="xml">XML</button>
                                <button class="toolbar-btn" data-format="md">MD</button>
                            </div>
                        </div>
                        <div class="panel-content" id="previewContentWrapper">
                            <pre id="previewContent"></pre>
                        </div>
                    </div>
                    <!-- Right Panel -->
                    <div class="right-panel" id="rightPanel">
                        <div class="panel-header">
                            <h3 class="panel-title">AI Assistant</h3>
                            <button class="panel-close" id="panelClose">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="panel-tabs">
                            <button class="panel-tab active">Assistant</button>
                            <button class="panel-tab">Parameters</button>
                            <button class="panel-tab">History</button>
                            <button class="panel-tab">Versions</button>
                        </div>
                        
                        <div class="panel-content">
                            <!-- AI Assistant Content -->
                            <div id="assistantContent">
                                <div class="form-group">
                                    <label class="form-label">Model Selection</label>
                                    <select class="form-input form-select">
                                        <option>GPT-4 Turbo</option>
                                        <option>GPT-4</option>
                                        <option>GPT-3.5 Turbo</option>
                                        <option>Claude 3 Opus</option>
                                        <option>Claude 3 Sonnet</option>
                                        <option>Gemini Pro 1.5</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Temperature</label>
                                    <input type="range" min="0" max="2" step="0.1" value="0.7" class="form-input">
                                    <div class="form-helper">Controls randomness: 0.7 recommended</div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Max Tokens</label>
                                    <input type="number" class="form-input" value="2048">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">System Prompt</label>
                                    <textarea class="form-input form-textarea" placeholder="Enter system prompt..."></textarea>
                                </div>
                                
                                <button class="btn btn-primary" style="width: 100%;">
                                    <i class="fas fa-magic"></i>
                                    <span>Generate Response</span>
                                </button>
                                
                                <div style="margin-top: var(--space-xl);">
                                    <h4 style="font-size: var(--text-sm); font-weight: 600; margin-bottom: var(--space-md);">Suggestions</h4>
                                    <div style="display: flex; flex-direction: column; gap: var(--space-sm);">
                                        <button class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
                                            <i class="fas fa-lightbulb"></i>
                                            <span>Improve clarity</span>
                                        </button>
                                        <button class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
                                            <i class="fas fa-compress-alt"></i>
                                            <span>Make concise</span>
                                        </button>
                                        <button class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
                                            <i class="fas fa-expand-alt"></i>
                                            <span>Add details</span>
                                        </button>
                                        <button class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
                                            <i class="fas fa-spell-check"></i>
                                            <span>Fix grammar</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>
    
    <!-- Modal Template -->
    <div class="modal-backdrop" id="modalBackdrop"></div>
    <div class="modal" id="newPromptModal" style="width: 600px;">
        <div class="modal-header">
            <h2 class="modal-title">Create New Prompt</h2>
            <button class="modal-close" onclick="closeModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label class="form-label form-label-required">Prompt Name</label>
                <input type="text" id="newPromptName" class="form-input" placeholder="Enter prompt name...">
            </div>
            
            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea id="newPromptDescription" class="form-input form-textarea" placeholder="Describe your prompt..."></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">Category</label>
                <select id="newPromptCategory" class="form-input form-select">
                    <option>General</option>
                    <option>Code Generation</option>
                    <option>Creative Writing</option>
                    <option>Data Analysis</option>
                    <option>Translation</option>
                    <option>Custom</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">Tags</label>
                <input type="text" id="newPromptTags" class="form-input" placeholder="Enter tags separated by commas...">
            </div>
            
            <div class="form-group">
                <label class="form-label">Template</label>
                <select id="newPromptTemplate" class="form-input form-select">
                    <option>Blank</option>
                    <option>Basic Prompt</option>
                    <option>System + User</option>
                    <option>Chain of Thought</option>
                    <option>Few-Shot Learning</option>
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            <button class="btn btn-primary" onclick="uiRenderer.createPromptFromModal()">
                <i class="fas fa-plus"></i>
                <span>Create Prompt</span>
            </button>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script src="src/js/managers/promptManager.js"></script>
    <script src="src/js/managers/modelManager.js"></script>
    <script src="src/js/managers/analyticsManager.js"></script>
    <script src="src/js/managers/collaborationManager.js"></script>
    <script src="src/js/managers/exportImportManager.js"></script>
    <script src="src/js/ui/uiRenderer.js"></script>
    <script src="src/js/features/autoSaveManager.js"></script>
    <script src="src/js/features/keyboardManager.js"></script>
    <script src="src/js/features/searchEngine.js"></script>
    <script src="src/js/ui/sectionEditor.js"></script>
    <script src="src/js/ui/previewManager.js"></script>
    <script src="src/js/features/testManager.js"></script>
    <script src="src/js/features/abTester.js"></script>
    <script src="src/js/features/chatSimulator.js"></script>
    <script src="src/js/main.js"></script>

    <!-- A/B Test Modal -->
    <div class="modal-backdrop" id="abModalBackdrop" style="display: none;"></div>
    <div class="modal" id="abModal" style="display: none; max-width: 80vw; width: 1200px;">
        <div class="modal-header">
            <h2 class="modal-title">A/B Prompt Comparison</h2>
            <button class="modal-close" id="abModalClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body" style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-lg);">
            <!-- Column A -->
            <div>
                <h3>Variant A</h3>
                <textarea class="form-control form-textarea" id="abPromptA" style="height: 200px;"></textarea>
                <div class="results-panel" style="margin-top: 0.75rem;">
                    <div class="result-header"><strong>Output A</strong></div>
                    <div id="abResultA" class="result-box" style="height: 250px; overflow-y: auto;"></div>
                </div>
            </div>
            <!-- Column B -->
            <div>
                <h3>Variant B</h3>
                <textarea class="form-control form-textarea" id="abPromptB" style="height: 200px;"></textarea>
                <div class="results-panel" style="margin-top: 0.75rem;">
                    <div class="result-header"><strong>Output B</strong></div>
                    <div id="abResultB" class="result-box" style="height: 250px; overflow-y: auto;"></div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" id="loadCurrentPromptABtn">Load Current to A</button>
            <button class="btn btn-primary" id="runABTestBtn"><i class="fas fa-play"></i> Run Test</button>
        </div>
    </div>
</body>
</html>
